<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Intel SPMD Program Compiler: type.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Intel SPMD Program Compiler
   &#160;<span id="projectnumber">1.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">type.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Definitions for classes related to type representation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="type_8h_source.html">type.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="expr_8h_source.html">expr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sym_8h_source.html">sym.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="llvmutil_8h_source.html">llvmutil.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="module_8h_source.html">module.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;llvm/IR/Value.h&gt;</code><br />
<code>#include &lt;llvm/IR/Module.h&gt;</code><br />
<code>#include &lt;llvm/DebugInfo.h&gt;</code><br />
<code>#include &lt;llvm/DIBuilder.h&gt;</code><br />
<code>#include &lt;llvm/Support/Dwarf.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for type.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="type_8cpp__incl.png" border="0" usemap="#type_8cpp" alt=""/></div>
<map name="type_8cpp" id="type_8cpp">
<area shape="rect" id="node2" href="type_8h.html" title="File with declarations for classes related to type representation. " alt="" coords="696,155,759,181"/>
<area shape="rect" id="node15" href="expr_8h.html" title="Expr abstract base class and expression implementations. " alt="" coords="342,80,403,107"/>
<area shape="rect" id="node18" href="sym_8h.html" title="header file with declarations for symbol and symbol table classes. " alt="" coords="562,80,623,107"/>
<area shape="rect" id="node21" href="llvmutil_8h.html" title="Header file with declarations for various LLVM utility stuff. " alt="" coords="1040,155,1119,181"/>
<area shape="rect" id="node24" href="module_8h.html" title="Declaration of the Module class, which is the ispc&#45;side representation of the results of compiling a ..." alt="" coords="183,155,266,181"/>
<area shape="rect" id="node3" href="ispc_8h.html" title="Main ispc.header file. Defines Target, Globals and Opt classes. " alt="" coords="375,304,434,331"/>
<area shape="rect" id="node11" href="util_8h.html" title="util.h" alt="" coords="637,229,690,256"/>
<area shape="rect" id="node16" href="ast_8h.html" title="ast.h" alt="" coords="160,229,215,256"/>
<area shape="rect" id="node19" href="decl_8h.html" title="Declarations related to type declarations; the parser basically creates instances of these classes..." alt="" coords="497,155,557,181"/>
</map>
</div>
</div>
<p><a href="type_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e627d073c89dce263558a9aed2ee77a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a3e627d073c89dce263558a9aed2ee77a">lShouldPrintName</a> (const std::string &amp;name)</td></tr>
<tr class="separator:a3e627d073c89dce263558a9aed2ee77a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da0b4906ed2dcecb37b4d5df8a3b6e6"><td class="memItemLeft" align="right" valign="top">static llvm::DIType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a4da0b4906ed2dcecb37b4d5df8a3b6e6">lCreateDIArray</a> (llvm::DIType eltType, int count)</td></tr>
<tr class="separator:a4da0b4906ed2dcecb37b4d5df8a3b6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b841d553c4d5c71599ceb195d33a2b"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#ab1b841d553c4d5c71599ceb195d33a2b">lMangleStructName</a> (const std::string &amp;name, <a class="el" href="structVariability.html">Variability</a> variability)</td></tr>
<tr class="separator:ab1b841d553c4d5c71599ceb195d33a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fce3b0a9cc1183d9b0bee4b7821b9cb"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a1fce3b0a9cc1183d9b0bee4b7821b9cb">lMangleStruct</a> (<a class="el" href="structVariability.html">Variability</a> variability, bool isConst, const std::string &amp;name)</td></tr>
<tr class="separator:a1fce3b0a9cc1183d9b0bee4b7821b9cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e867fccbfcc62156868428624b1c00"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classType.html">Type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#ac8e867fccbfcc62156868428624b1c00">lVectorConvert</a> (const <a class="el" href="classType.html">Type</a> *type, <a class="el" href="structSourcePos.html">SourcePos</a> pos, const char *reason, int vecSize)</td></tr>
<tr class="separator:ac8e867fccbfcc62156868428624b1c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ebe7cb3612850b086e3d4736c3f9ae"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a27ebe7cb3612850b086e3d4736c3f9ae">lCheckTypeEquality</a> (const <a class="el" href="classType.html">Type</a> *a, const <a class="el" href="classType.html">Type</a> *b, bool ignoreConst)</td></tr>
<tr class="separator:a27ebe7cb3612850b086e3d4736c3f9ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8b18d361511404cd151dc0db45baff4a"><td class="memItemLeft" align="right" valign="top">static std::map&lt; std::string, llvm::StructType * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a8b18d361511404cd151dc0db45baff4a">lStructTypeMap</a></td></tr>
<tr class="separator:a8b18d361511404cd151dc0db45baff4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definitions for classes related to type representation. </p>

<p>Definition in file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a27ebe7cb3612850b086e3d4736c3f9ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lCheckTypeEquality </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ignoreConst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="type_8cpp_source.html#l03633">3633</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="type_8h_source.html#l00344">AtomicType::basicType</a>, <a class="el" href="classType.html#a45d413567d0ec16fb051ed44d63ef262">Type::GetBaseType()</a>, <a class="el" href="type_8cpp_source.html#l01070">PointerType::GetBaseType()</a>, <a class="el" href="type_8cpp_source.html#l01522">ArrayType::GetElementCount()</a>, <a class="el" href="type_8cpp_source.html#l01842">VectorType::GetElementCount()</a>, <a class="el" href="type_8cpp_source.html#l01528">ArrayType::GetElementType()</a>, <a class="el" href="type_8cpp_source.html#l01848">VectorType::GetElementType()</a>, <a class="el" href="type_8h_source.html#l00936">FunctionType::GetNumParameters()</a>, <a class="el" href="type_8cpp_source.html#l03386">FunctionType::GetParameterType()</a>, <a class="el" href="type_8cpp_source.html#l03417">Type::GetReferenceTarget()</a>, <a class="el" href="type_8cpp_source.html#l02783">ReferenceType::GetReferenceTarget()</a>, <a class="el" href="type_8h_source.html#l00925">FunctionType::GetReturnType()</a>, <a class="el" href="type_8h_source.html#l00749">StructType::GetStructName()</a>, <a class="el" href="classType.html#abed1daafd55cfa288721464e830f9d6e">Type::GetVariability()</a>, <a class="el" href="type_8cpp_source.html#l00228">AtomicType::GetVariability()</a>, <a class="el" href="type_8cpp_source.html#l00698">EnumType::GetVariability()</a>, <a class="el" href="classType.html#ac6e78ff62665a8c796511e5ecdd3c7f8">Type::IsConstType()</a>, <a class="el" href="type_8h_source.html#l00948">FunctionType::isExported</a>, <a class="el" href="type_8h_source.html#l00952">FunctionType::isExternC</a>, <a class="el" href="type_8h_source.html#l00468">PointerType::IsFrozenSlice()</a>, <a class="el" href="type_8h_source.html#l00467">PointerType::IsSlice()</a>, <a class="el" href="type_8h_source.html#l00944">FunctionType::isTask</a>, <a class="el" href="type_8h_source.html#l00145">Type::IsUniformType()</a>, <a class="el" href="type_8h_source.html#l00957">FunctionType::isUnmasked</a>, and <a class="el" href="type_8h_source.html#l00416">EnumType::pos</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l03735">Type::Equal()</a>, and <a class="el" href="type_8cpp_source.html#l03741">Type::EqualIgnoringConst()</a>.</p>

</div>
</div>
<a class="anchor" id="a4da0b4906ed2dcecb37b4d5df8a3b6e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static llvm::DIType lCreateDIArray </td>
          <td>(</td>
          <td class="paramtype">llvm::DIType&#160;</td>
          <td class="paramname"><em>eltType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Utility routine to create a llvm array type of the given number of the given element type. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l00087">87</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="module_8h_source.html#l00161">Module::diBuilder</a>, and <a class="el" href="ispc_8cpp_source.html#l00093">m</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l00902">EnumType::GetDIType()</a>, <a class="el" href="type_8cpp_source.html#l01312">PointerType::GetDIType()</a>, and <a class="el" href="type_8cpp_source.html#l01627">ArrayType::GetDIType()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fce3b0a9cc1183d9b0bee4b7821b9cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string lMangleStruct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structVariability.html">Variability</a>&#160;</td>
          <td class="paramname"><em>variability</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isConst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mangle a struct name for use in function name mangling. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l02273">2273</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="ispc_8h_source.html#l00172">Assert</a>, <a class="el" href="type_8cpp_source.html#l00150">Variability::MangleString()</a>, and <a class="el" href="type_8h_source.html#l00059">Variability::Unbound</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l02290">StructType::Mangle()</a>, and <a class="el" href="type_8cpp_source.html#l02655">UndefinedStructType::Mangle()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1b841d553c4d5c71599ceb195d33a2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string lMangleStructName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structVariability.html">Variability</a>&#160;</td>
          <td class="paramname"><em>variability</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Using a struct's name, its variability, and the vector width for the current compilation target, this function generates a string that encodes that full structure type, for use in the lStructTypeMap. Note that the vector width is needed in order to differentiate between 'varying' structs with different compilation targets, which have different memory layouts... </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l01979">1979</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="util_8h_source.html#l00113">FATAL</a>, <a class="el" href="ispc_8cpp_source.html#l00092">g</a>, <a class="el" href="ispc_8h_source.html#l00285">Target::getVectorWidth()</a>, <a class="el" href="type_8h_source.html#l00059">Variability::SOA</a>, <a class="el" href="type_8h_source.html#l00077">Variability::soaWidth</a>, <a class="el" href="ispc_8h_source.html#l00549">Globals::target</a>, <a class="el" href="type_8h_source.html#l00076">Variability::type</a>, <a class="el" href="type_8h_source.html#l00059">Variability::Uniform</a>, and <a class="el" href="type_8h_source.html#l00059">Variability::Varying</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l02079">StructType::GetCStructName()</a>, <a class="el" href="type_8cpp_source.html#l02317">StructType::LLVMType()</a>, <a class="el" href="type_8cpp_source.html#l02672">UndefinedStructType::LLVMType()</a>, <a class="el" href="type_8cpp_source.html#l02009">StructType::StructType()</a>, and <a class="el" href="type_8cpp_source.html#l02532">UndefinedStructType::UndefinedStructType()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e627d073c89dce263558a9aed2ee77a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool lShouldPrintName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Utility routine used in code that prints out declarations; returns true if the given name should be printed, false otherwise. This allows us to omit the names for various internal things (whose names start with double underscores) and emit anonymous declarations for them instead. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l00074">74</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l00454">AtomicType::GetCDeclaration()</a>, <a class="el" href="type_8cpp_source.html#l00850">EnumType::GetCDeclaration()</a>, <a class="el" href="type_8cpp_source.html#l02296">StructType::GetCDeclaration()</a>, <a class="el" href="type_8cpp_source.html#l02661">UndefinedStructType::GetCDeclaration()</a>, and <a class="el" href="type_8cpp_source.html#l02912">ReferenceType::GetCDeclaration()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8e867fccbfcc62156868428624b1c00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="classType.html">Type</a>* lVectorConvert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSourcePos.html">SourcePos</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vecSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Given an atomic or vector type, return a vector type of the given vecSize. Issue an error if given a vector type that isn't already that size. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l03435">3435</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="util_8cpp_source.html#l00385">Error()</a>, <a class="el" href="type_8cpp_source.html#l01842">VectorType::GetElementCount()</a>, and <a class="el" href="classType.html#ad4beeade1b41648887baa6acda20a69e">Type::GetString()</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l03459">Type::MoreGeneralType()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a8b18d361511404cd151dc0db45baff4a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, llvm::StructType *&gt; lStructTypeMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="type_8cpp_source.html#l01969">1969</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 11 2017 01:56:38 for Intel SPMD Program Compiler by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
