<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Intel SPMD Program Compiler: builtins.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>builtins.cpp File Reference</h1>  </div>
</div>
<div class="contents">

<p>Definitions of functions related to setting up the standard library and other builtins.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="builtins_8h_source.html">builtins.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="type_8h_source.html">type.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sym_8h_source.html">sym.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="expr_8h_source.html">expr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="llvmutil_8h_source.html">llvmutil.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="module_8h_source.html">module.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ctx_8h_source.html">ctx.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="math_8h_source.html">math.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="stdlib_8h_source.html">stdlib.h</a>&gt;</code><br/>
<code>#include &lt;llvm/LLVMContext.h&gt;</code><br/>
<code>#include &lt;llvm/Module.h&gt;</code><br/>
<code>#include &lt;llvm/Type.h&gt;</code><br/>
<code>#include &lt;llvm/DerivedTypes.h&gt;</code><br/>
<code>#include &lt;llvm/Instructions.h&gt;</code><br/>
<code>#include &lt;llvm/Intrinsics.h&gt;</code><br/>
<code>#include &lt;llvm/Linker.h&gt;</code><br/>
<code>#include &lt;llvm/Target/TargetMachine.h&gt;</code><br/>
<code>#include &lt;llvm/ADT/Triple.h&gt;</code><br/>
<code>#include &lt;llvm/Support/MemoryBuffer.h&gt;</code><br/>
<code>#include &lt;llvm/Bitcode/ReaderWriter.h&gt;</code><br/>
<!-- startSectionHeader --><div class="dynheader">
Include dependency graph for builtins.cpp:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="builtins_8cpp__incl.png" border="0" usemap="#builtins_8cpp" alt=""/></div>
<map name="builtins_8cpp" id="builtins_8cpp">
<area shape="rect" id="node3" href="builtins_8h.html" title="Declarations of functions related to builtins and the standard library." alt="" coords="605,161,688,189"/><area shape="rect" id="node21" href="type_8h.html" title="File with declarations for classes related to type representation." alt="" coords="176,161,240,189"/><area shape="rect" id="node28" href="util_8h.html" title="util.h" alt="" coords="712,161,768,189"/><area shape="rect" id="node31" href="sym_8h.html" title="header file with declarations for symbol and symbol table classes." alt="" coords="873,83,935,111"/><area shape="rect" id="node39" href="expr_8h.html" title="Expr abstract base class and expression implementations." alt="" coords="431,83,495,111"/><area shape="rect" id="node45" href="llvmutil_8h.html" title="Header file with declarations for various LLVM utility stuff." alt="" coords="264,161,349,189"/><area shape="rect" id="node54" href="module_8h.html" title="Declaration of the Module class, which is the ispc&#45;side representation of the results of compiling a ..." alt="" coords="525,83,611,111"/><area shape="rect" id="node58" href="ctx_8h.html" title="Declaration of the FunctionEmitContext class." alt="" coords="988,83,1044,111"/><area shape="rect" id="node69" href="math_8h.html" title="math.h" alt="" coords="1119,83,1188,111"/><area shape="rect" id="node71" href="stdlib_8h.html" title="stdlib.h" alt="" coords="1212,83,1284,111"/><area shape="rect" id="node5" href="ispc_8h.html" title="Main ispc.header file." alt="" coords="680,238,741,266"/><area shape="rect" id="node7" href="assert_8h.html" title="assert.h" alt="" coords="1296,315,1371,343"/><area shape="rect" id="node11" href="stdint_8h.html" title="stdint.h" alt="" coords="583,315,655,343"/><area shape="rect" id="node9" href="cdefs_8h.html" title="sys/cdefs.h" alt="" coords="2412,393,2508,421"/><area shape="rect" id="node34" href="decl_8h.html" title="Declarations related to type declarations; the parser basically creates instances of these classes..." alt="" coords="843,161,904,189"/><area shape="rect" id="node73" href="Availability_8h.html" title="Availability.h" alt="" coords="1695,315,1801,343"/><area shape="rect" id="node77" href="__types_8h.html" title="_types.h" alt="" coords="2465,238,2545,266"/><area shape="rect" id="node84" href="wait_8h.html" title="sys/wait.h" alt="" coords="2113,161,2201,189"/><area shape="rect" id="node106" href="alloca_8h.html" title="alloca.h" alt="" coords="2545,161,2620,189"/><area shape="rect" id="node113" href="types_8h.html" title="machine/types.h" alt="" coords="1869,161,2003,189"/><area shape="rect" id="node75" href="AvailabilityInternal_8h.html" title="AvailabilityInternal.h" alt="" coords="1667,393,1829,421"/><area shape="rect" id="node79" href="__types_8h.html" title="sys/_types.h" alt="" coords="2323,315,2427,343"/><area shape="rect" id="node89" href="signal_8h.html" title="sys/signal.h" alt="" coords="2239,238,2340,266"/><area shape="rect" id="node95" href="resource_8h.html" title="sys/resource.h" alt="" coords="2044,238,2164,266"/><area shape="rect" id="node102" href="endian_8h.html" title="machine/endian.h" alt="" coords="1876,238,2020,266"/></map>
<!-- endSectionContent --></div>

<p><a href="builtins_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#acd8617a8f2ac0de8bc1cc032cf449e19">yyparse</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">yy_buffer_state *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#a14866839501f9788fa33614be98acd4f">yy_scan_string</a> (const char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classType.html">Type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#a1321254c115cc19f6b414c8eceb0ff7f">lLLVMTypeToISPCType</a> (const llvm::Type *t, bool intAsUnsigned)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#aa3d6e69d3d793c71231c7ef90f26bd7e">lCreateSymbol</a> (const std::string &amp;name, const <a class="el" href="classType.html">Type</a> *returnType, const std::vector&lt; const <a class="el" href="classType.html">Type</a> * &gt; &amp;argTypes, const llvm::FunctionType *ftype, llvm::Function *func, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#a81398a326620dd285b8e6a26061b5a35">lCreateISPCSymbol</a> (llvm::Function *func, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#a5554f69d9b8a595fa07c03b7bf942434">lAddModuleSymbols</a> (llvm::Module *module, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#af9f3fc9a00628d1e0c363f749d081546">lCheckModuleIntrinsics</a> (llvm::Module *module)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#a026726f4d41fc5a3456186b7d5c74d19">AddBitcodeToModule</a> (const unsigned char *bitcode, int length, llvm::Module *module, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#ac856ea2f0d194438ddf3b45476a32ed6">lDefineConstantInt</a> (const char *name, int val, llvm::Module *module, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#abb212cbf480db6c2edde04fcb5cfef57">lDefineConstantIntFunc</a> (const char *name, int val, llvm::Module *module, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#af3cb7d2a18e821d2d1cac65334f55e45">lDefineProgramIndex</a> (llvm::Module *module, <a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="builtins_8cpp.html#a356bc9bc8aebc682d51966e145f82b70">DefineStdlib</a> (<a class="el" href="classSymbolTable.html">SymbolTable</a> *symbolTable, llvm::LLVMContext *ctx, llvm::Module *module, bool includeStdlibISPC)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Definitions of functions related to setting up the standard library and other builtins. </p>

<p>Definition in file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a026726f4d41fc5a3456186b7d5c74d19"></a><!-- doxytag: member="builtins.cpp::AddBitcodeToModule" ref="a026726f4d41fc5a3456186b7d5c74d19" args="(const unsigned char *bitcode, int length, llvm::Module *module, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddBitcodeToModule </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"> <em>bitcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This utility function takes serialized binary LLVM bitcode and adds its definitions to the given module. Functions in the bitcode that can be mapped to ispc functions are also added to the symbol table.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">bitcode</td><td>Binary LLVM bitcode (e.g. the contents of a *.bc file) </td></tr>
    <tr><td class="paramname">length</td><td>Length of the bitcode buffer </td></tr>
    <tr><td class="paramname">module</td><td><a class="el" href="classModule.html">Module</a> to link the bitcode into </td></tr>
    <tr><td class="paramname">symbolTable</td><td><a class="el" href="classSymbol.html" title="Representation of a program symbol.">Symbol</a> table to add definitions to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00340">340</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="parse_8yy.html">assert</a>, <a class="el" href="ispc_8h_source.html#l00339">Globals::ctx</a>, <a class="el" href="util_8cpp_source.html#l00263">Error()</a>, <a class="el" href="ispc_8cpp_source.html#l00065">g</a>, <a class="el" href="builtins_8cpp_source.html#l00287">lAddModuleSymbols()</a>, <a class="el" href="builtins_8cpp_source.html#l00308">lCheckModuleIntrinsics()</a>, <a class="el" href="ispc_8cpp_source.html#l00066">m</a>, <a class="el" href="module_8h_source.html#l00119">Module::module</a>, and <a class="el" href="parse_8yy.html">NULL</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00433">DefineStdlib()</a>.</p>

</div>
</div>
<a class="anchor" id="a356bc9bc8aebc682d51966e145f82b70"></a><!-- doxytag: member="builtins.cpp::DefineStdlib" ref="a356bc9bc8aebc682d51966e145f82b70" args="(SymbolTable *symbolTable, llvm::LLVMContext *ctx, llvm::Module *module, bool includeStdlibISPC)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DefineStdlib </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::LLVMContext *&#160;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"> <em>includeStdlib</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds declarations and definitions of ispc standard library functions and types to the given module.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">symbolTable</td><td><a class="el" href="classSymbolTable.html" title="Symbol table that holds all known symbols during parsing and compilation.">SymbolTable</a> in which to add symbol definitions for stdlib stuff </td></tr>
    <tr><td class="paramname">ctx</td><td>llvm::LLVMContext to use for getting types and the like for standard library definitions </td></tr>
    <tr><td class="paramname">module</td><td><a class="el" href="classModule.html">Module</a> in which to add the declarations/definitions </td></tr>
    <tr><td class="paramname">includeStdlib</td><td>Indicates whether the definitions from the stdlib.ispc file should be added to the module. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00433">433</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="builtins_8cpp_source.html#l00340">AddBitcodeToModule()</a>, <a class="el" href="ispc_8h_source.html#l00170">Target::AVX</a>, <a class="el" href="ispc_8h_source.html#l00223">Opt::fastMaskedVload</a>, <a class="el" href="util_8h_source.html#l00104">FATAL</a>, <a class="el" href="ispc_8cpp_source.html#l00065">g</a>, <a class="el" href="ispc_8h_source.html#l00179">Target::is32bit</a>, <a class="el" href="ispc_8h_source.html#l00173">Target::isa</a>, <a class="el" href="builtins_8cpp_source.html#l00379">lDefineConstantInt()</a>, <a class="el" href="builtins_8cpp_source.html#l00395">lDefineConstantIntFunc()</a>, <a class="el" href="builtins_8cpp_source.html#l00414">lDefineProgramIndex()</a>, <a class="el" href="ispc_8h_source.html#l00302">Globals::Math_ISPC</a>, <a class="el" href="ispc_8h_source.html#l00302">Globals::Math_ISPCFast</a>, <a class="el" href="ispc_8h_source.html#l00302">Globals::Math_SVML</a>, <a class="el" href="ispc_8h_source.html#l00302">Globals::Math_System</a>, <a class="el" href="ispc_8h_source.html#l00303">Globals::mathLib</a>, <a class="el" href="ispc_8h_source.html#l00296">Globals::opt</a>, <a class="el" href="ispc_8h_source.html#l00170">Target::SSE2</a>, <a class="el" href="ispc_8h_source.html#l00170">Target::SSE4</a>, <a class="el" href="ispc_8h_source.html#l00298">Globals::target</a>, <a class="el" href="ispc_8h_source.html#l00195">Target::vectorWidth</a>, <a class="el" href="builtins_8cpp.html#a14866839501f9788fa33614be98acd4f">yy_scan_string()</a>, and <a class="el" href="builtins_8cpp.html#acd8617a8f2ac0de8bc1cc032cf449e19">yyparse()</a>.</p>

<p>Referenced by <a class="el" href="module_8cpp_source.html#l00153">Module::CompileFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a5554f69d9b8a595fa07c03b7bf942434"></a><!-- doxytag: member="builtins.cpp::lAddModuleSymbols" ref="a5554f69d9b8a595fa07c03b7bf942434" args="(llvm::Module *module, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lAddModuleSymbols </td>
          <td>(</td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given an LLVM module, create ispc symbols for the functions in the module. </p>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00287">287</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="parse_8yy.html">assert</a>, and <a class="el" href="builtins_8cpp_source.html#l00201">lCreateISPCSymbol()</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00340">AddBitcodeToModule()</a>.</p>

</div>
</div>
<a class="anchor" id="af9f3fc9a00628d1e0c363f749d081546"></a><!-- doxytag: member="builtins.cpp::lCheckModuleIntrinsics" ref="af9f3fc9a00628d1e0c363f749d081546" args="(llvm::Module *module)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lCheckModuleIntrinsics </td>
          <td>(</td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>&#160;)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>In many of the builtins-*.ll files, we have declarations of various LLVM intrinsics that are then used in the implementation of various target- specific functions. This function loops over all of the intrinsic declarations and makes sure that the signature we have in our .ll file matches the signature of the actual intrinsic. </p>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00308">308</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="parse_8yy.html">assert</a>, <a class="el" href="ispc_8h_source.html#l00339">Globals::ctx</a>, <a class="el" href="ispc_8cpp_source.html#l00065">g</a>, and <a class="el" href="ispc_8h_source.html#l00082">LLVM_TYPE_CONST</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00340">AddBitcodeToModule()</a>.</p>

</div>
</div>
<a class="anchor" id="a81398a326620dd285b8e6a26061b5a35"></a><!-- doxytag: member="builtins.cpp::lCreateISPCSymbol" ref="a81398a326620dd285b8e6a26061b5a35" args="(llvm::Function *func, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool lCreateISPCSymbol </td>
          <td>(</td>
          <td class="paramtype">llvm::Function *&#160;</td>
          <td class="paramname"> <em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given an LLVM function declaration, synthesize the equivalent ispc symbol for the function (if possible). Returns true on success, false on failure. </p>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00201">201</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="sym_8cpp_source.html#l00151">SymbolTable::AddFunction()</a>, <a class="el" href="type_8cpp_source.html#l02056">Type::Equal()</a>, <a class="el" href="sym_8h_source.html#l00083">Symbol::function</a>, <a class="el" href="builtins_8cpp_source.html#l00176">lCreateSymbol()</a>, <a class="el" href="builtins_8cpp_source.html#l00081">lLLVMTypeToISPCType()</a>, <a class="el" href="ispc_8h_source.html#l00111">SourcePos::name</a>, <a class="el" href="parse_8yy.html">NULL</a>, <a class="el" href="type_8cpp_source.html#l01871">FunctionType::SetArgumentDefaults()</a>, <a class="el" href="type_8h_source.html#l00227">AtomicType::VaryingBool</a>, and <a class="el" href="type_8h_source.html#l00230">AtomicType::VaryingInt32</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00287">lAddModuleSymbols()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3d6e69d3d793c71231c7ef90f26bd7e"></a><!-- doxytag: member="builtins.cpp::lCreateSymbol" ref="aa3d6e69d3d793c71231c7ef90f26bd7e" args="(const std::string &amp;name, const Type *returnType, const std::vector&lt; const Type * &gt; &amp;argTypes, const llvm::FunctionType *ftype, llvm::Function *func, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lCreateSymbol </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"> <em>returnType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const <a class="el" href="classType.html">Type</a> * &gt; &amp;&#160;</td>
          <td class="paramname"> <em>argTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const llvm::FunctionType *&#160;</td>
          <td class="paramname"> <em>ftype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::Function *&#160;</td>
          <td class="paramname"> <em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00176">176</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="sym_8cpp_source.html#l00151">SymbolTable::AddFunction()</a>, <a class="el" href="sym_8h_source.html#l00083">Symbol::function</a>, <a class="el" href="ispc_8h_source.html#l00111">SourcePos::name</a>, <a class="el" href="parse_8yy.html">NULL</a>, and <a class="el" href="type_8cpp_source.html#l01871">FunctionType::SetArgumentDefaults()</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00201">lCreateISPCSymbol()</a>.</p>

</div>
</div>
<a class="anchor" id="ac856ea2f0d194438ddf3b45476a32ed6"></a><!-- doxytag: member="builtins.cpp::lDefineConstantInt" ref="ac856ea2f0d194438ddf3b45476a32ed6" args="(const char *name, int val, llvm::Module *module, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lDefineConstantInt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility routine that defines a constant int32 with given value, adding the symbol to both the ispc symbol table and the given LLVM module. </p>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00379">379</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="sym_8cpp_source.html#l00098">SymbolTable::AddVariable()</a>, <a class="el" href="sym_8h_source.html#l00094">Symbol::constValue</a>, <a class="el" href="llvmutil_8h_source.html#l00059">LLVMTypes::Int32Type</a>, <a class="el" href="ispc_8h_source.html#l00082">LLVM_TYPE_CONST</a>, <a class="el" href="llvmutil_8cpp_source.html#l00188">LLVMInt32()</a>, <a class="el" href="sym_8h_source.html#l00078">Symbol::name</a>, <a class="el" href="decl_8h_source.html#l00063">SC_STATIC</a>, <a class="el" href="sym_8h_source.html#l00079">Symbol::storagePtr</a>, <a class="el" href="sym_8h_source.html#l00091">Symbol::type</a>, and <a class="el" href="type_8h_source.html#l00241">AtomicType::UniformConstInt32</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00433">DefineStdlib()</a>.</p>

</div>
</div>
<a class="anchor" id="abb212cbf480db6c2edde04fcb5cfef57"></a><!-- doxytag: member="builtins.cpp::lDefineConstantIntFunc" ref="abb212cbf480db6c2edde04fcb5cfef57" args="(const char *name, int val, llvm::Module *module, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lDefineConstantIntFunc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00395">395</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="sym_8cpp_source.html#l00098">SymbolTable::AddVariable()</a>, <a class="el" href="parse_8yy.html">assert</a>, <a class="el" href="ispc_8h_source.html#l00339">Globals::ctx</a>, <a class="el" href="sym_8h_source.html#l00083">Symbol::function</a>, <a class="el" href="ispc_8cpp_source.html#l00065">g</a>, <a class="el" href="llvmutil_8cpp_source.html#l00188">LLVMInt32()</a>, <a class="el" href="parse_8yy.html">NULL</a>, <a class="el" href="decl_8h_source.html#l00063">SC_STATIC</a>, and <a class="el" href="type_8h_source.html#l00230">AtomicType::UniformInt32</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00433">DefineStdlib()</a>.</p>

</div>
</div>
<a class="anchor" id="af3cb7d2a18e821d2d1cac65334f55e45"></a><!-- doxytag: member="builtins.cpp::lDefineProgramIndex" ref="af3cb7d2a18e821d2d1cac65334f55e45" args="(llvm::Module *module, SymbolTable *symbolTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void lDefineProgramIndex </td>
          <td>(</td>
          <td class="paramtype">llvm::Module *&#160;</td>
          <td class="paramname"> <em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSymbolTable.html">SymbolTable</a> *&#160;</td>
          <td class="paramname"> <em>symbolTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00414">414</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="sym_8cpp_source.html#l00098">SymbolTable::AddVariable()</a>, <a class="el" href="sym_8h_source.html#l00094">Symbol::constValue</a>, <a class="el" href="ispc_8cpp_source.html#l00065">g</a>, <a class="el" href="llvmutil_8h_source.html#l00077">LLVMTypes::Int32VectorType</a>, <a class="el" href="ispc_8h_source.html#l00057">ISPC_MAX_NVEC</a>, <a class="el" href="ispc_8h_source.html#l00082">LLVM_TYPE_CONST</a>, <a class="el" href="llvmutil_8cpp_source.html#l00304">LLVMInt32Vector()</a>, <a class="el" href="sym_8h_source.html#l00078">Symbol::name</a>, <a class="el" href="decl_8h_source.html#l00063">SC_STATIC</a>, <a class="el" href="sym_8h_source.html#l00079">Symbol::storagePtr</a>, <a class="el" href="ispc_8h_source.html#l00298">Globals::target</a>, <a class="el" href="sym_8h_source.html#l00091">Symbol::type</a>, <a class="el" href="type_8h_source.html#l00241">AtomicType::VaryingConstInt32</a>, and <a class="el" href="ispc_8h_source.html#l00195">Target::vectorWidth</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00433">DefineStdlib()</a>.</p>

</div>
</div>
<a class="anchor" id="a1321254c115cc19f6b414c8eceb0ff7f"></a><!-- doxytag: member="builtins.cpp::lLLVMTypeToISPCType" ref="a1321254c115cc19f6b414c8eceb0ff7f" args="(const llvm::Type *t, bool intAsUnsigned)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="classType.html">Type</a>* lLLVMTypeToISPCType </td>
          <td>(</td>
          <td class="paramtype">const llvm::Type *&#160;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"> <em>intAsUnsigned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given an LLVM type, try to find the equivalent ispc type. Note that this is an under-constrained problem due to LLVM's type representations carrying less information than ispc's. (For example, LLVM doesn't distinguish between signed and unsigned integers in its types.)</p>
<p>Because this function is only used for generating ispc declarations of functions defined in LLVM bitcode in the builtins-*.ll files, in practice we can get enough of what we need for the relevant cases to make things work, partially with the help of the intAsUnsigned parameter, which indicates whether LLVM integer types should be treated as being signed or unsigned. </p>

<p>Definition at line <a class="el" href="builtins_8cpp_source.html#l00081">81</a> of file <a class="el" href="builtins_8cpp_source.html">builtins.cpp</a>.</p>

<p>References <a class="el" href="llvmutil_8h_source.html#l00055">LLVMTypes::BoolType</a>, <a class="el" href="llvmutil_8h_source.html#l00069">LLVMTypes::DoublePointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00062">LLVMTypes::DoubleType</a>, <a class="el" href="llvmutil_8h_source.html#l00087">LLVMTypes::DoubleVectorPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00080">LLVMTypes::DoubleVectorType</a>, <a class="el" href="llvmutil_8h_source.html#l00068">LLVMTypes::FloatPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00061">LLVMTypes::FloatType</a>, <a class="el" href="llvmutil_8h_source.html#l00086">LLVMTypes::FloatVectorPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00079">LLVMTypes::FloatVectorType</a>, <a class="el" href="llvmutil_8h_source.html#l00065">LLVMTypes::Int16PointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00058">LLVMTypes::Int16Type</a>, <a class="el" href="llvmutil_8h_source.html#l00083">LLVMTypes::Int16VectorPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00076">LLVMTypes::Int16VectorType</a>, <a class="el" href="llvmutil_8h_source.html#l00066">LLVMTypes::Int32PointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00059">LLVMTypes::Int32Type</a>, <a class="el" href="llvmutil_8h_source.html#l00084">LLVMTypes::Int32VectorPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00077">LLVMTypes::Int32VectorType</a>, <a class="el" href="llvmutil_8h_source.html#l00067">LLVMTypes::Int64PointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00060">LLVMTypes::Int64Type</a>, <a class="el" href="llvmutil_8h_source.html#l00085">LLVMTypes::Int64VectorPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00078">LLVMTypes::Int64VectorType</a>, <a class="el" href="llvmutil_8h_source.html#l00064">LLVMTypes::Int8PointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00057">LLVMTypes::Int8Type</a>, <a class="el" href="llvmutil_8h_source.html#l00082">LLVMTypes::Int8VectorPointerType</a>, <a class="el" href="llvmutil_8h_source.html#l00075">LLVMTypes::Int8VectorType</a>, <a class="el" href="parse_8yy.html">NULL</a>, <a class="el" href="type_8h_source.html#l00227">AtomicType::UniformBool</a>, <a class="el" href="type_8h_source.html#l00237">AtomicType::UniformDouble</a>, <a class="el" href="type_8h_source.html#l00234">AtomicType::UniformFloat</a>, <a class="el" href="type_8h_source.html#l00229">AtomicType::UniformInt16</a>, <a class="el" href="type_8h_source.html#l00230">AtomicType::UniformInt32</a>, <a class="el" href="type_8h_source.html#l00235">AtomicType::UniformInt64</a>, <a class="el" href="type_8h_source.html#l00228">AtomicType::UniformInt8</a>, <a class="el" href="type_8h_source.html#l00232">AtomicType::UniformUInt16</a>, <a class="el" href="type_8h_source.html#l00233">AtomicType::UniformUInt32</a>, <a class="el" href="type_8h_source.html#l00236">AtomicType::UniformUInt64</a>, <a class="el" href="type_8h_source.html#l00231">AtomicType::UniformUInt8</a>, <a class="el" href="type_8h_source.html#l00237">AtomicType::VaryingDouble</a>, <a class="el" href="type_8h_source.html#l00234">AtomicType::VaryingFloat</a>, <a class="el" href="type_8h_source.html#l00229">AtomicType::VaryingInt16</a>, <a class="el" href="type_8h_source.html#l00230">AtomicType::VaryingInt32</a>, <a class="el" href="type_8h_source.html#l00235">AtomicType::VaryingInt64</a>, <a class="el" href="type_8h_source.html#l00228">AtomicType::VaryingInt8</a>, <a class="el" href="type_8h_source.html#l00232">AtomicType::VaryingUInt16</a>, <a class="el" href="type_8h_source.html#l00233">AtomicType::VaryingUInt32</a>, <a class="el" href="type_8h_source.html#l00236">AtomicType::VaryingUInt64</a>, <a class="el" href="type_8h_source.html#l00231">AtomicType::VaryingUInt8</a>, <a class="el" href="type_8h_source.html#l00249">AtomicType::Void</a>, and <a class="el" href="llvmutil_8h_source.html#l00053">LLVMTypes::VoidType</a>.</p>

<p>Referenced by <a class="el" href="builtins_8cpp_source.html#l00201">lCreateISPCSymbol()</a>.</p>

</div>
</div>
<a class="anchor" id="a14866839501f9788fa33614be98acd4f"></a><!-- doxytag: member="builtins.cpp::yy_scan_string" ref="a14866839501f9788fa33614be98acd4f" args="(const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">yy_buffer_state* yy_scan_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="module_8cpp_source.html#l00153">Module::CompileFile()</a>, and <a class="el" href="builtins_8cpp_source.html#l00433">DefineStdlib()</a>.</p>

</div>
</div>
<a class="anchor" id="acd8617a8f2ac0de8bc1cc032cf449e19"></a><!-- doxytag: member="builtins.cpp::yyparse" ref="acd8617a8f2ac0de8bc1cc032cf449e19" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int yyparse </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="module_8cpp_source.html#l00153">Module::CompileFile()</a>, and <a class="el" href="builtins_8cpp_source.html#l00433">DefineStdlib()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Oct 6 2011 19:44:52 for Intel SPMD Program Compiler by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
