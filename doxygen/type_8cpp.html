<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Intel SPMD Program Compiler: type.cpp File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Intel SPMD Program Compiler
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">type.cpp File Reference</div>  </div>
</div>
<div class="contents">

<p>Definitions for classes related to type representation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="type_8h_source.html">type.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="expr_8h_source.html">expr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sym_8h_source.html">sym.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="llvmutil_8h_source.html">llvmutil.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="module_8h_source.html">module.h</a>&quot;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;map&gt;</code><br/>
<code>#include &lt;llvm/Value.h&gt;</code><br/>
<code>#include &lt;llvm/Module.h&gt;</code><br/>
<code>#include &lt;llvm/Analysis/DIBuilder.h&gt;</code><br/>
<code>#include &lt;llvm/DebugInfo.h&gt;</code><br/>
<code>#include &lt;llvm/Support/Dwarf.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for type.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="type_8cpp__incl.png" border="0" usemap="#type_8cpp" alt=""/></div>
<map name="type_8cpp" id="type_8cpp">
<area shape="rect" id="node3" href="type_8h.html" title="File with declarations for classes related to type representation." alt="" coords="355,161,420,189"/><area shape="rect" id="node26" href="expr_8h.html" title="Expr abstract base class and expression implementations." alt="" coords="253,83,317,111"/><area shape="rect" id="node32" href="sym_8h.html" title="header file with declarations for symbol and symbol table classes." alt="" coords="611,83,673,111"/><area shape="rect" id="node41" href="llvmutil_8h.html" title="Header file with declarations for various LLVM utility stuff." alt="" coords="531,161,616,189"/><area shape="rect" id="node49" href="module_8h.html" title="Declaration of the Module class, which is the ispc&#45;side representation of the results of compiling a ..." alt="" coords="112,83,197,111"/><area shape="rect" id="node5" href="ispc_8h.html" title="Main ispc.header file." alt="" coords="196,315,257,343"/><area shape="rect" id="node17" href="util_8h.html" title="util.h" alt="" coords="177,238,233,266"/><area shape="rect" id="node35" href="decl_8h.html" title="Declarations related to type declarations; the parser basically creates instances of these classes..." alt="" coords="674,161,736,189"/></map>
</div>
</div>
<p><a href="type_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a3e627d073c89dce263558a9aed2ee77a">lShouldPrintName</a> (const std::string &amp;name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static llvm::DIType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a4da0b4906ed2dcecb37b4d5df8a3b6e6">lCreateDIArray</a> (llvm::DIType eltType, int count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#ab1b841d553c4d5c71599ceb195d33a2b">lMangleStructName</a> (const std::string &amp;name, <a class="el" href="structVariability.html">Variability</a> variability)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a1fce3b0a9cc1183d9b0bee4b7821b9cb">lMangleStruct</a> (<a class="el" href="structVariability.html">Variability</a> variability, bool isConst, const std::string &amp;name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classType.html">Type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#ac8e867fccbfcc62156868428624b1c00">lVectorConvert</a> (const <a class="el" href="classType.html">Type</a> *type, <a class="el" href="structSourcePos.html">SourcePos</a> pos, const char *reason, int vecSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a27ebe7cb3612850b086e3d4736c3f9ae">lCheckTypeEquality</a> (const <a class="el" href="classType.html">Type</a> *a, const <a class="el" href="classType.html">Type</a> *b, bool ignoreConst)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::map&lt; std::string, <br class="typebreak"/>
llvm::StructType * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="type_8cpp.html#a8b18d361511404cd151dc0db45baff4a">lStructTypeMap</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Definitions for classes related to type representation. </p>

<p>Definition in file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a27ebe7cb3612850b086e3d4736c3f9ae"></a><!-- doxytag: member="type.cpp::lCheckTypeEquality" ref="a27ebe7cb3612850b086e3d4736c3f9ae" args="(const Type *a, const Type *b, bool ignoreConst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool lCheckTypeEquality </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ignoreConst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="type_8cpp_source.html#l03201">3201</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="type_8h_source.html#l00329">AtomicType::basicType</a>, <a class="el" href="classType.html#a51af28faf17eb05982547d9b340429eb">Type::GetBaseType()</a>, <a class="el" href="type_8cpp_source.html#l00931">PointerType::GetBaseType()</a>, <a class="el" href="type_8cpp_source.html#l01358">ArrayType::GetElementCount()</a>, <a class="el" href="type_8cpp_source.html#l01653">VectorType::GetElementCount()</a>, <a class="el" href="type_8cpp_source.html#l01364">ArrayType::GetElementType()</a>, <a class="el" href="type_8cpp_source.html#l01659">VectorType::GetElementType()</a>, <a class="el" href="type_8h_source.html#l00882">FunctionType::GetNumParameters()</a>, <a class="el" href="type_8cpp_source.html#l02954">FunctionType::GetParameterType()</a>, <a class="el" href="type_8cpp_source.html#l02985">Type::GetReferenceTarget()</a>, <a class="el" href="type_8cpp_source.html#l02437">ReferenceType::GetReferenceTarget()</a>, <a class="el" href="type_8h_source.html#l00871">FunctionType::GetReturnType()</a>, <a class="el" href="type_8h_source.html#l00709">StructType::GetStructName()</a>, <a class="el" href="classType.html#a619effc9d2d2517bd884076eb9559b65">Type::GetVariability()</a>, <a class="el" href="type_8cpp_source.html#l00198">AtomicType::GetVariability()</a>, <a class="el" href="type_8cpp_source.html#l00596">EnumType::GetVariability()</a>, <a class="el" href="classType.html#a9a6d77fb89abc534e2ee1726cc13cf05">Type::IsConstType()</a>, <a class="el" href="type_8h_source.html#l00894">FunctionType::isExported</a>, <a class="el" href="type_8h_source.html#l00898">FunctionType::isExternC</a>, <a class="el" href="type_8h_source.html#l00446">PointerType::IsFrozenSlice()</a>, <a class="el" href="type_8h_source.html#l00445">PointerType::IsSlice()</a>, <a class="el" href="type_8h_source.html#l00890">FunctionType::isTask</a>, <a class="el" href="type_8h_source.html#l00140">Type::IsUniformType()</a>, <a class="el" href="type_8h_source.html#l00903">FunctionType::isUnmasked</a>, <a class="el" href="parse_8yy.html">NULL</a>, and <a class="el" href="type_8h_source.html#l00394">EnumType::pos</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l03303">Type::Equal()</a>, and <a class="el" href="type_8cpp_source.html#l03309">Type::EqualIgnoringConst()</a>.</p>

</div>
</div>
<a class="anchor" id="a4da0b4906ed2dcecb37b4d5df8a3b6e6"></a><!-- doxytag: member="type.cpp::lCreateDIArray" ref="a4da0b4906ed2dcecb37b4d5df8a3b6e6" args="(llvm::DIType eltType, int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static llvm::DIType lCreateDIArray </td>
          <td>(</td>
          <td class="paramtype">llvm::DIType&#160;</td>
          <td class="paramname"><em>eltType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility routine to create a llvm DIArray type of the given number of the given element type. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l00077">77</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="module_8h_source.html#l00154">Module::diBuilder</a>, and <a class="el" href="ispc_8cpp_source.html#l00066">m</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l00796">EnumType::GetDIType()</a>, <a class="el" href="type_8cpp_source.html#l01163">PointerType::GetDIType()</a>, and <a class="el" href="type_8cpp_source.html#l01455">ArrayType::GetDIType()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fce3b0a9cc1183d9b0bee4b7821b9cb"></a><!-- doxytag: member="type.cpp::lMangleStruct" ref="a1fce3b0a9cc1183d9b0bee4b7821b9cb" args="(Variability variability, bool isConst, const std::string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static std::string lMangleStruct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structVariability.html">Variability</a>&#160;</td>
          <td class="paramname"><em>variability</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isConst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mangle a struct name for use in function name mangling. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l02033">2033</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="ispc_8h_source.html#l00150">Assert</a>, <a class="el" href="type_8cpp_source.html#l00120">Variability::MangleString()</a>, and <a class="el" href="type_8h_source.html#l00054">Variability::Unbound</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l02048">StructType::Mangle()</a>, and <a class="el" href="type_8cpp_source.html#l02329">UndefinedStructType::Mangle()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1b841d553c4d5c71599ceb195d33a2b"></a><!-- doxytag: member="type.cpp::lMangleStructName" ref="ab1b841d553c4d5c71599ceb195d33a2b" args="(const std::string &amp;name, Variability variability)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static std::string lMangleStructName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structVariability.html">Variability</a>&#160;</td>
          <td class="paramname"><em>variability</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Using a struct's name, its variability, and the vector width for the current compilation target, this function generates a string that encodes that full structure type, for use in the lStructTypeMap. Note that the vector width is needed in order to differentiate between 'varying' structs with different compilation targets, which have different memory layouts... </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l01770">1770</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="util_8h_source.html#l00113">FATAL</a>, <a class="el" href="ispc_8cpp_source.html#l00065">g</a>, <a class="el" href="type_8h_source.html#l00054">Variability::SOA</a>, <a class="el" href="type_8h_source.html#l00072">Variability::soaWidth</a>, <a class="el" href="ispc_8h_source.html#l00377">Globals::target</a>, <a class="el" href="type_8h_source.html#l00071">Variability::type</a>, <a class="el" href="type_8h_source.html#l00054">Variability::Uniform</a>, <a class="el" href="type_8h_source.html#l00054">Variability::Varying</a>, and <a class="el" href="ispc_8h_source.html#l00235">Target::vectorWidth</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l02075">StructType::LLVMType()</a>, <a class="el" href="type_8cpp_source.html#l02346">UndefinedStructType::LLVMType()</a>, <a class="el" href="type_8cpp_source.html#l01800">StructType::StructType()</a>, and <a class="el" href="type_8cpp_source.html#l02206">UndefinedStructType::UndefinedStructType()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e627d073c89dce263558a9aed2ee77a"></a><!-- doxytag: member="type.cpp::lShouldPrintName" ref="a3e627d073c89dce263558a9aed2ee77a" args="(const std::string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool lShouldPrintName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility routine used in code that prints out declarations; returns true if the given name should be printed, false otherwise. This allows us to omit the names for various internal things (whose names start with double underscores) and emit anonymous declarations for them instead. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l00064">64</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l00424">AtomicType::GetCDeclaration()</a>, <a class="el" href="type_8cpp_source.html#l00747">EnumType::GetCDeclaration()</a>, <a class="el" href="type_8cpp_source.html#l02054">StructType::GetCDeclaration()</a>, <a class="el" href="type_8cpp_source.html#l02335">UndefinedStructType::GetCDeclaration()</a>, and <a class="el" href="type_8cpp_source.html#l02566">ReferenceType::GetCDeclaration()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8e867fccbfcc62156868428624b1c00"></a><!-- doxytag: member="type.cpp::lVectorConvert" ref="ac8e867fccbfcc62156868428624b1c00" args="(const Type *type, SourcePos pos, const char *reason, int vecSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="classType.html">Type</a>* lVectorConvert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classType.html">Type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSourcePos.html">SourcePos</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vecSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given an atomic or vector type, return a vector type of the given vecSize. Issue an error if given a vector type that isn't already that size. </p>

<p>Definition at line <a class="el" href="type_8cpp_source.html#l03003">3003</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

<p>References <a class="el" href="util_8cpp_source.html#l00377">Error()</a>, <a class="el" href="type_8cpp_source.html#l01653">VectorType::GetElementCount()</a>, <a class="el" href="classType.html#a4d1539ea0f1c563872676c3ed3cfa568">Type::GetString()</a>, and <a class="el" href="parse_8yy.html">NULL</a>.</p>

<p>Referenced by <a class="el" href="type_8cpp_source.html#l03027">Type::MoreGeneralType()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a8b18d361511404cd151dc0db45baff4a"></a><!-- doxytag: member="type.cpp::lStructTypeMap" ref="a8b18d361511404cd151dc0db45baff4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, llvm::StructType *&gt; <a class="el" href="type_8cpp.html#a8b18d361511404cd151dc0db45baff4a">lStructTypeMap</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="type_8cpp_source.html#l01760">1760</a> of file <a class="el" href="type_8cpp_source.html">type.cpp</a>.</p>

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 29 2012 08:42:26 for Intel SPMD Program Compiler by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
